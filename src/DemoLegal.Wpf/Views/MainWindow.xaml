<Window x:Class="DemoLegal.Wpf.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Demo Legal  Импорт и подготовка дел" Height="540" Width="860"
        WindowStartupLocation="CenterScreen">
  <DockPanel>
    <Menu DockPanel.Dock="Top">
      <MenuItem Header="_Файл">
        <MenuItem Header="Открыть папку дел" Click="OpenCasesRoot_Click"/>
        <Separator/>
        <MenuItem Header="Выход" Click="Exit_Click"/>
      </MenuItem>
      <MenuItem Header="_Справка">
        <MenuItem Header="О программе" Click="About_Click"/>
      </MenuItem>
    </Menu>
    <Grid Margin="16" RowDefinitions="Auto,Auto,*,Auto">
      <!-- Выбор файла -->
      <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
        <TextBox Width="540" Text="{Binding SelectedPath, UpdateSourceTrigger=PropertyChanged}" />
        <Button Content="Обзор" Width="100" Margin="8,0,0,0" Click="Browse_Click"/>
        <Button Content="Импорт" Width="100" Margin="8,0,0,0"
                Command="{Binding ImportCommand}" />
        <Button Content="Дела" Width="100" Margin="8,0,0,0" Click="OpenCases_Click"/>
      </StackPanel>

      <!-- Статусы -->
      <StackPanel Orientation="Horizontal" Margin="0,0,0,12" Grid.Row="1" HorizontalAlignment="Left" >
        <TextBlock Text="Строк прочитано: " FontWeight="Bold"/>
        <TextBlock Text="{Binding RowsRead}" Margin="4,0,12,0"/>
        <TextBlock Text="Импортировано: " FontWeight="Bold"/>
        <TextBlock Text="{Binding RowsImported}" Margin="4,0,12,0"/>
        <TextBlock Text="Ошибок: " FontWeight="Bold"/>
        <TextBlock Text="{Binding Errors}" Margin="4,0,12,0"/>
        <TextBlock Text="Дел создано/обновлено: " FontWeight="Bold"/>
        <TextBlock Text="{Binding CasesBuilt}" Margin="4,0,12,0"/>
      </StackPanel>

      <!-- Сообщения -->
      <GroupBox Header="Сообщения" Grid.Row="2">
        <ListBox ItemsSource="{Binding Messages}"/>
      </GroupBox>

      <!-- Прогресс -->
      <StatusBar Grid.Row="3">
        <StatusBarItem>
          <TextBlock Text="{Binding IsBusy, Converter={StaticResource BooleanToBusyConverter}, FallbackValue=''}"/>
        </StatusBarItem>
      </StatusBar>
    </Grid>
  </DockPanel>
</Window>
